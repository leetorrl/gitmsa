apiVersion: v1
kind: ConfigMap
metadata:
  name: mariadb-initdb-config
#  namespace: maria-name
data:
  init.sql: |
    CREATE DATABASE IF NOT EXISTS mydata;
    CREATE DATABASE IF NOT EXISTS msa;
    USE mydata;
    CREATE TABLE friends (id INT, name VARCHAR(256), age INT, gender VARCHAR(3));
    INSERT INTO friends VALUES (1, 'Abhijeet', 32, 'm');
    INSERT INTO friends VALUES (2, 'Anjali', 29, 'f');
    INSERT INTO friends VALUES (3, 'Aayush', 27, 'm');
    INSERT INTO friends VALUES (4, '길동', 28, 'm');
    
    
    use msa;
    drop table if exists users;
    create table users
    (
        id       bigint       not null auto_increment,
        email    varchar(50)  not null,
        name     varchar(50)  not null,
        password varchar(100) not null,
        thumb    varchar(255),
        user_id  varchar(255) not null,
        primary key (id)
    ) engine=InnoDB;
    alter table if exists users add constraint user_email_unique unique (email)
    alter table if exists users add constraint user_userid_unique unique (user_id)
    
    
    drop table if exists orders;
        create table orders;
        (
            qty         integer      not null,
            total_price integer      not null,
            unit_price  integer      not null,
            created_at  datetime(6) not null,
            id          bigint       not null auto_increment,
            product_id  varchar(120) not null,
            order_id    varchar(255) not null,
            user_id     varchar(255) not null,
            primary key (id)
        ) engine=InnoDB
        alter table if exists orders add constraint order_id_pk unique (order_id);